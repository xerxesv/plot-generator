<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Plot generator</title>
  </head>
  <body>
  	<div id="container">
    </div>
    <script>
      // debugger;
      document.addEventListener('DOMContentLoaded', function () {
        var html = 'test';
        var child = document.createElement('div');
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'embed', true);
        // debugger;
        xhr.onload = function () {
          // debugger;
          if (xhr.status === 200) {
            try {              
              html = xhr.responseText;
            }
            catch (error) {
              console.log( 'bad json' );
              
            }            
          }
          else {           
           console.log('bad xhr request. status: ' + xhr.status);
           
          }
          // stop animating plot fields one by one
          // set field text to the appropriate key in plot (or placeholder)
          // bad requests/bad json will just use the old value
          // debugger;
          console.log( html );
          // html = '<p>Just some <span>text</span> here</p>';
          child.innerHTML = html;
          child = child.firstChild;
          document.getElementById('container').appendChild(child);

        }

        xhr.send();

      })
    </script>
  </body>
</html>